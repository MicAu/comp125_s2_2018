\bgroup \tikzset{png export} \begin{tikzpicture}
\pgfmathsetmacro{\step}{15}
\pgfmathsetmacro{\headerChange}{1}
\pgfmathsetmacro{\change}{-2}


\foreach \x in {0,1,...,7} {
	\ifthenelse{\x=0}
	{
	\node[current] at (\x*1.5,\step) (block\x) {\pgfmathparse{\selunsorted[\x]}\pgfmathresult};
	}
	{
	\node[unsorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\selunsorted[\x]}\pgfmathresult};
	}
	\node at (\x*1.5, \step+\headerChange) {a[\x]};
}
\draw [ultra thick, rounded corners, <->] (0*1.5, \step-0.6) -- (0*1.5, \step-1) -- (2*1.5, \step-1) -- (2*1.5, \step-0.5);

\edef\step{\step+\change}
\node[sorted] at (0*1.5,\step) (block0) {\pgfmathparse{\selitera[0]}\pgfmathresult};

\foreach \x in {1,...,7} {
	\ifthenelse{\x=1}
	{
		\node[current] at (\x*1.5,\step) (block\x) {\pgfmathparse{\selitera[\x]}\pgfmathresult};
	}
	{
	\node[unsorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\selitera[\x]}\pgfmathresult};
	}
}
\draw [ultra thick, rounded corners, <->] (1*1.5, \step-0.6) -- (1*1.5, \step-1) -- (3*1.5, \step-1) -- (3*1.5, \step-0.5);

\edef\step{\step+\change}
\foreach \x in {0,...,1} {
	\node[sorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterb[\x]}\pgfmathresult};
}
\foreach \x in {2,...,7} {
	\ifthenelse{\x=2}
	{
		\node[current] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterb[\x]}\pgfmathresult};
		}
		{
		\node[unsorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterb[\x]}\pgfmathresult};

		}
}
\draw [ultra thick, rounded corners, <->] (2*1.5, \step-0.6) -- (2*1.5, \step-1) -- (5*1.5, \step-1) -- (5*1.5, \step-0.5);

\edef\step{\step+\change}
\foreach \x in {0,...,2} {
	\node[sorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterc[\x]}\pgfmathresult};
}
\foreach \x in {3,...,7} {
	\ifthenelse{\x=3} {
	\node[current] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterc[\x]}\pgfmathresult};
	}
	{
	\node[unsorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterc[\x]}\pgfmathresult};
	}
}
\draw [ultra thick, rounded corners, <->] (3*1.5, \step-0.6) -- (3*1.5, \step-1) -- (7*1.5, \step-1) -- (7*1.5, \step-0.5);

\edef\step{\step+\change}
\foreach \x in {0,...,3} {
	\node[sorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterd[\x]}\pgfmathresult};
}
\foreach \x in {4,...,7} {
	\ifthenelse{\x=4}
	{
	\node[current] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterd[\x]}\pgfmathresult};
	}
	{
	\node[unsorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterd[\x]}\pgfmathresult};
	}
}
\draw [ultra thick, rounded corners, <->] (4*1.5-0.2, \step-0.6) -- (4*1.5-0.2, \step-1) -- (4*1.5+0.2, \step-1) -- (4*1.5+0.2, \step-0.6);

\edef\step{\step+\change}
\foreach \x in {0,...,4} {
	\node[sorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\selitere[\x]}\pgfmathresult};
}
\foreach \x in {5,...,7} {
	\ifthenelse{\x=5} 
	{
	\node[current] at (\x*1.5,\step) (block\x) {\pgfmathparse{\selitere[\x]}\pgfmathresult};
	}
	{
	\node[unsorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\selitere[\x]}\pgfmathresult};
	}
}
\draw [ultra thick, rounded corners, <->] (5*1.5, \step-0.6) -- (5*1.5, \step-1) -- (7*1.5, \step-1) -- (7*1.5, \step-0.5);

\edef\step{\step+\change}
\foreach \x in {0,...,5} {
	\node[sorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterf[\x]}\pgfmathresult};
}
\foreach \x in {6,...,7} {
	\ifthenelse{\x=6}
	{
	\node[current] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterf[\x]}\pgfmathresult};
	}
	{
	\node[unsorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterf[\x]}\pgfmathresult};
	}
}
\draw [ultra thick, rounded corners, <->] (6*1.5, \step-0.6) -- (6*1.5, \step-1) -- (7*1.5, \step-1) -- (7*1.5, \step-0.5);

\edef\step{\step+\change}
\foreach \x in {0,...,6} {
	\node[sorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterg[\x]}\pgfmathresult};
}
\foreach \x in {7,...,7} {
	\node[unsorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\seliterg[\x]}\pgfmathresult};
}

\foreach \x in {0,1,...,7} {
	\node[sorted] at (\x*1.5,\step) (block\x) {\pgfmathparse{\selsorted[\x]}\pgfmathresult};
}
\end{tikzpicture} \egroup
